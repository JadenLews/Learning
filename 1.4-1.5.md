# 1.4
* Internet is an infastructure that provides services to distributed systems. 
* Packet suffers from several types of delays at each node along the path
* Nodal Processing delay: Time required to examine packet's header and detmermine where to direct packet. Time to check for bit level errors. Typically on order of microseconds
* Queueing delay: At the queue, waits to be transmitted onto link. On the order of microseconds to milliseconds.
* Transmission delay: Assuming packets are transmitted in first come first serve, packet can be transmitted only after all the packets before have been transmitted. L/R. Typically on the order of microseconds to milliseconds.
* Propogation delay: TIme required to propogate from beginning to link to router. Propogates at speed of link. d/s
* Total Nodal delay: Cummulated delay
* A packet is sent from the upstream node.
* Difference between transmission and propogation delay: Transmission is like how big a pipe is, propogation is how long
* Queueing delay signifigance depends on rate at which traffic arrives.
* a: average rate of units packet per second
* if L*a/R > 1, then average rate of bits arriving is greater than transmission rate. 
* Queue will increase wihtout bound.
* DESIGN YOUR SYSTEM SO THAT TRAFFIC INTENSITY IS NO GREATER THAN 1
* If N packets arrive simultaneously every (L/R)N seconds. The first packet has no queueing delay, second packet does of L/R, the nth packet has a queueing delay of (n-1)L/R seconds.
* Queues have finite capacity
* delay_endtoend = N(d_proc + d_trans + d_prop)
* The source can reconstruct the router taken by packets flowing from source to destination, and source can determine the round trip delays.
* End system can wait wanting to transmit a packet into a shared medium
* Average throughput of file transfer is F/T bits/sec


# 1.5
* A layered architecture allows us to discuss a specific part of a large and complex system.
* As long as the layer provides the same service to the layer above it, and uses the same services from the layer below it, the remainder of the system remains unchanged when a layer's implementation is changed
* To provide strucure to design of network protocols, organize protocols, implement the protocols in layers. Each protocol belongs to one of the layers. 
* A layer provides services to the layer above, the so called service model of a layer.
* each layer provides its service by
  * (1) performing certain actions within that layer and by 
  * (2) using the services of the layer directly below it.
* The network layer is often a mixed implementation of hardware and software.
* Layering may duplicate lower layer funcgionality.
* When taken together, protocols of various layers are called protocol stack. Consists of 5 layers:
  * The physical
  * Link
  * Network
  * Transport
  * Application Layers
* We take a top down approach first covering the application layer.
* Application Layer: 
  * Where network applications and application later protocols reside. 
  * HTTP, SMTP, FTP
  * Packet of information at the application layer in a message.
* Transport Layer:
  * transports application layer messages between application endpoints.
  * TCP: gaurenteed delivery of application layer messages. Breks long messages into shorter segments and provides congestion control mechanism.
  * UDP: Provides a connectionless service to applications. Provides no reliability, no flow control, no congestion control.
  * Refer to a transport layer packet as a segment.
* Network Layer: 
  * Responsible for moving network layer packets known as datagrams from one host to another.
  * Internet transport layer TCP or UDP in a source host passed a transport layer segment and a destination address to the network layer, like giving an address on a post card.
  * Network layer provides the service of delivering the segment to the transport layer.
  * Includes the celebrated IP protocol, defines the fields in the datagram as well as how the end systems and routers act on these fields.
  * There is only 1 IP protocol.
  * INternet network layer also contains routing protocols that determine the routes that datagrams take betweeen sources and destinations.
* Link Layer:
  * Routes a datagram through a series of routers between source and dest. 
  * Network layers relies on the services of the link layer. 
  * At each node, network layer passes the datafram down to the link layer, which delivers the datagram to the next node. 
  * At next node, link layer passes the datafram to the netwokr layer.
  * some link-layer protocols provide reliable delivery, from transmitting node, over one link, to receiving node.
  * Refer to link layer packets as frames
* Physical Layer: 
  * job of the physical layer is to move the individual bits within the frame from one node to the next. 


* routers and link-layer switches do not implement all of the layers in the protocol stack; they typically implement only the bottom layers. 
* Internet routers are capable of implementing the IP protocol (a layer 3 protocol), while link-layer switches are not.

* Path:
  * Figure 1.24 also illustrates the important concept of encapsulation. At the
sending host, an application-layer message (M in Figure 1.24) is passed to the
transport layer. In the simplest case, the transport layer takes the message and
appends additional information (so-called transport-layer header information, Ht
in Figure 1.24) that will be used by the receiver-side transport layer. The appli-
cation-layer message and the transport-layer header information together consti-
tute the transport-layer segment. The transport-layer segment thus encapsulates
the application-layer message. The added information might include information
allowing the receiver-side transport layer to deliver the message up to the appro-
priate application, and error-detection bits that allow the receiver to determine
whether bits in the message have been changed in route. The transport layer then
passes the segment to the network layer, which adds network-layer header infor-
mation (Hn in Figure 1.24) such as source and destination end system addresses,
creating a network-layer datagram. The datagram is then passed to the link
layer, which (of course!) will add its own link-layer header information and cre-
ate a link-layer frame. Thus, we see that at each layer, a packet has two types of
fields: header fields and a payload field. The payload is typically a packet from
the layer above.









# Class 09/05
## "Real internet delays and routes
* traceroute program: provides delay measurement from source to router along end-end internet path towards dest.
## Packet loss:
* queue preceding link in buffer has finite capacity
* Packet arriving to full queue dropped
* lost packet may be retransmitted by precious node, by source end system, or not at all

## throughput
* Throughput: rate bits/time unit at which bits are being send from sender to receiver
  * Instantanious: rate at given points in time
  * average: rate over longer period of time
  * Throughput is only as much as weakest link
* Utilization: amount being used / amount available


## Chapter 1: roadmap
## Protocol layers, service models
### Protocol "layers" and reference models
- Networks are complex with many "pieces"  
  - hosts
  - routers
  - links of various media
  - applications
  - protocols
  - hardware, software
- Question: is there any hope of organizing structure of network?
- Layers: each layer implements a service
  - via its own internal layer actions
  - relying on services provided by layer below
  - 67
- Why layering?
  - explicit structure allows identification, relationship of systems pieces
  - layered reference model for discussion
  - Modulatizing eases maintenance, updating of system
    - change ijn layers service implementatoin: transparent to rest of system
    - e.g., change in gate prodedure doesn't affect rest of system
- Layered internet protocol stack
  - Application: supporting network applications: 
    - HTTP, IMAP, SMTP, DNS
  - Transport:
    - process to process data transfer
      - TCP, UDP
  - Network:
    - routing of datagrams from source to destination
      - IP, routing protocols
  - Link: data transfert between neightboring network elements
    - Ethernet, 802.11 (wifi), PPP
  - physical:
    - bits on the wire


PDU: Protocol Data Unit, AKA Messages
Transport-layer protocol encapsulates application-layer message, M, with transport layer-layer header Ht to create a transport-layer segment

network-layer protocol encapsulates transport-layer segment [Ht | M] with network layer-layer header Hn to create a network-layer datagram
â€¢ Hn used by network layer protocol to
implement its service

Link-layer protocol encapsulates network datagram [Hn| [Ht |M], with link-layer header Hl to create a link-layer frame

Message -> Segment -> datagram -> frame